---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';
import H2Styled from '../components/H2Styled.astro';
import SpanStyled from '../components/SpanStyled.astro';
import Background from '../components/Background.astro';
import ImgSmall from '../components/ImgSmall.astro';
import './base.css';
import './anim.scss';
---

<script>
  import { animate, timeline, spring } from 'motion';
  import throttle from 'lodash.throttle';

  const cat = document.querySelector('#cat') as HTMLElement;
  const catBorder = document.querySelector('#catBorder') as HTMLElement;
  const TIMING_MOUSE_FOLLOW = 50 / 1000; //sec

  function followCursor(e: MouseEvent) {
    const screenWidth = document.documentElement.clientWidth / 2;
    const screenHeight = document.documentElement.clientHeight / 2;
    const centerX = e.clientX - screenWidth;
    const centerY = screenHeight - e.clientY;
    const degX = Math.min(20, Math.max(-20, centerY * 0.05));
    const degY = Math.min(28, Math.max(-28, centerX * 0.05));
    animate(cat, { rotateX: degX, rotateY: degY }, { duration: TIMING_MOUSE_FOLLOW });
    animate(catBorder, { rotateX: degX * 0.8, rotateY: degY * 0.8 }, { duration: TIMING_MOUSE_FOLLOW });
  }

  const followCursorThrottle = throttle(followCursor, TIMING_MOUSE_FOLLOW * 1000);
  document.addEventListener('mousemove', followCursorThrottle);

  timeline([
    ['#cat', { opacity: [0, 1] }, { duration: 5 }],
    [
      '#header-card',
      { opacity: [0, 1], scaleX: [10, 1], scaleY: [0.1, 1] },
      {
        opacity: { easing: 'linear', duration: 1 },
        scaleX: { easing: spring({ stiffness: 80 }), duration: 1 },
        scaleY: { easing: spring({ stiffness: 10 }), duration: 0.5 },
        at: '-4'
      }
    ],
    ['#header-card-hello', { opacity: [0, 1] }, { duration: 1, at: '-1.5' }],
    ['#header-card-mynameis', { opacity: [0, 1], height: [0, '28px'] }, { height: { easing: spring({ stiffness: 80 }) }, duration: 2 }],
    ['#header-card-cub', { opacity: [0, 1], height: [0, '128px'] }, { height: { easing: spring({ stiffness: 80 }) }, duration: 2, at: '-2' }],
    ['#mask-c', { strokeDashoffset: [0, '-60px'] }, { easing: 'ease-out', duration: 1, at: '-1' }],
    ['#mask-u', { strokeDashoffset: [0, '-60px'] }, { easing: 'ease-out', duration: 1.2, at: '-0.3' }],
    ['#mask-b1', { strokeDashoffset: [0, '-60px'] }, { easing: 'ease-out', duration: 0.8, at: '-0.3' }],
    ['#mask-b2', { strokeDashoffset: [0, '-60px'] }, { easing: 'ease-out', duration: 1, at: '-0.3' }]
  ]);
</script>

<style>
  header {
    perspective: 512px;
  }
</style>

<Layout title="cubcubcub ‚Äî Hello my name is cub">
  <Background />
  <main class="z-10 relative px-2">
    <div class="flex min-h-screen justify-center items-center overflow-x-hidden mb-60">
      <header class="max-w-lg mx-auto w-[500px]">
        <div
          class="relative aspect-[500/365] mb-3"
          aria-label="Stylized visage of a cat in black and white"
          role="img"
          id="cat"
        >
          <img
            id="catBackground"
            class="absolute top-0 left-0 w-full"
            src="/img/logo_fond.svg"
            alt=""
          />
          <img
            id="catBorder"
            class="absolute top-0 left-0 w-full"
            alt=""
            src="/img/logo_contour.svg"
          />
        </div>

        <h1
          id="header-card"
          class="bg-black border-y border-neutral-400 rounded-xl shadow-lg overflow-hidden"
        >
          <div class="bg-white text-center text-black p-3">
            <div
              id="header-card-hello"
              class="font-cursive text-4xl"
            >
              Hello
            </div>
            <div
              id="header-card-mynameis"
              class="text-xl -mt-3"
            >
              my name is
            </div>
          </div>
          <div
            id="header-card-cub"
            class="flex items-center justify-center"
          >
            <svg
              class="h-20 w-auto"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 68.9 33.8"
              role="img"
              aria-labelledby="title-cub"
            >
              <title id="title-cub">cub</title>
              <path
                id="letter-b2"
                fill="#fff"
                d="M50 16.5c0 .5.1.7.4.7l.5-.4c2.4-3.2 5.3-4.8 8.6-4.8 1.2 0 2.4.3 3.5.8 1 .6 2 1.3 2.8 2.3a12.2 12.2 0 0 1 1.9 11.4c-.5 1.2-1 2.2-1.8 3-.8.9-1.7 1.6-2.8 2-1 .6-2.2.8-3.5.8-1.5 0-3-.3-4.6-.9-1.4-.6-2.9-1.4-4.2-2.5a.7.7 0 0 0-.4-.2c-.3 0-.5.2-.6.4-1.8-2.2-2.2-8.2.2-12.6zm8.6.1c-.6 0-1.3.2-2 .5-.6.3-1.2.7-1.8 1.3-.6.6-1.1 1.2-1.6 2a13 13 0 0 0-1.3 3.1c0 .3 0 .5.3.7a25 25 0 0 0 3.7 2.6l1.9.8a6 6 0 0 0 1.7.2c1.2 0 2.1-.3 2.7-1 .6-.7 1-1.7 1-3 0-1-.2-2-.4-2.9a8 8 0 0 0-1-2.2c-.3-.7-.8-1.2-1.4-1.5-.5-.4-1.1-.6-1.8-.6z"
              ></path>
              <path
                id="mask-b2"
                stroke-dasharray="60"
                fill="none"
                stroke="#000"
                stroke-width="6.5"
                d="M48.2 27c-.4-4.1 7.5-14 12.1-12.7 6.3 1.8 6 10.9 3.8 13.4-2.6 3-5.3 3.2-13.8-1.7"
                style="stroke-dashoffset: -60px;"></path>
              <path
                id="letter-b1"
                fill="#fff"
                d="M45.8 27.7l-1.1-11.5a118 118 0 0 0-1.8-11.8v-.3c0-.4 0-.7.2-1l.7-.7.8-.4a4 4 0 0 1 1.1-.2c1 0 1.7.5 2.1 1.4l.5 2a67.5 67.5 0 0 1 1.1 7l.6 4.3c.7 6.5.6 11.9-.2 12.6a2 2 0 0 1-.9.6l-1 .1c-1.4 0-2-.7-2.1-2z"
              ></path>
              <path
                id="mask-b1"
                stroke-dasharray="60"
                fill="none"
                stroke="#000"
                stroke-width="8"
                d="M44.9.9C48 15 48.5 25 48 31"
                style="stroke-dashoffset: -60px;"></path>
              <path
                id="letter-u"
                fill="#fff"
                d="M26.2 21q0 3.3 1 5.1t3 1.8q1.2 0 2.2-.7 1-.7 1.8-2 .7-1.3 1.1-3 .4-1.8.4-4v-2.1l-.3-1.7q0-.7-.2-1.3v-1q0-.9.6-1.2.7-.4 2.1-.4 1.9 0 2.9.8 1 .9 1 2.5 0 4.4-.8 7.9-.9 3.5-2.5 6-1.6 2.4-3.8 3.7t-5.2 1.3q-2 0-3.7-.8-1.7-.9-2.9-2.3-1.2-1.6-2-3.6-.6-2.1-.6-4.6v-2l.2-2.3.2-2.7.4-3q0-.8.7-1.2.6-.5 1.5-.5t1.6.2q.8.2 1.3.5t.8.7q.4.4.4.8t-.2 1.4l-.4 2.2-.4 2.7-.2 2.8z"
              ></path>
              <path
                id="mask-u"
                stroke-dasharray="60"
                fill="none"
                stroke="#000"
                stroke-width="8"
                d="M24.7 8.4c-1.1 10-3 20.7 4.2 21.4 9 1 10-12.7 9.6-20.3"
                style="stroke-dashoffset: -60px;"></path>
              <path
                id="letter-c"
                fill="#fff"
                d="M10.9 9.3q1.3 0 2.5.4 1.2.3 2.1 1 1 .6 1.5 1.4.6.8.6 1.7l-.2 1-.6 1-.8.5q-.5.3-1 .3-.6 0-1-.5-.6-.4-1.1-1l-1.2-.9q-.6-.4-1.6-.4-.8 0-1.6.4-.7.4-1.2 1.2-.5.7-.7 1.8-.3 1-.3 2.2 0 3.5 1.3 5.3 1.4 1.8 3.8 1.8 1.2 0 2-.4.8-.3 1.5-.8l1.1-.8q.5-.4 1-.4.4 0 .7.2l.5.5.4.6.2.7q0 .8-.8 1.7-.8.9-2.1 1.6-1.3.7-2.8 1.1-1.6.5-3 .5-2 0-3.6-.8-1.7-.7-2.9-2-1.1-1.4-1.8-3.3-.7-2-.7-4.2 0-2.5.8-4.6.7-2 2-3.6Q5.2 11 7 10.2q1.8-1 3.9-1z"
              ></path>
              <path
                id="mask-c"
                stroke-dasharray="60"
                fill="none"
                stroke="#000"
                stroke-width="8"
                d="M17.3 16.8c-4.6-6.2-8.1-6.5-11.2-2.9-3.1 3.6-3 12 1.5 14 4.4 2.2 8.2-1.3 12.3-3"
                style="stroke-dashoffset: -60px;"></path>
            </svg>
          </div>
        </h1>
      </header>
    </div>

    <Card title="About Me">
      <p class="mb-2">Hi ! I'm a french developer, mainly front-end. I like to mix code üë®‚Äçüíª and graphic to get some nice interface.</p>
      <p class="mb-2">I'm interested in artificial intelligence and transhumanism. Future&nbsp;? Become a cyberbrain üß†.</p>
      <p>I love chocolate, cats üò∏ and games.</p>
    </Card>

    <Card title="My Stack">
      <ul>
        <li class="mb-2">
          <SpanStyled>IDE:</SpanStyled> VSCode
        </li>
        <li class="mb-2">
          <SpanStyled>Tools:</SpanStyled>
          Node.js, NPM, Git, Vite, BrowserSync, ...
        </li>
        <li class="mb-2">
          <SpanStyled>Languages:</SpanStyled>
          HTML, CSS, JavaScript, TypeScript, SCSS, JSON, ...
        </li>
        <li class="mb-2">
          <SpanStyled>Frameworks &amp; Libs:</SpanStyled>
          Vue ‚ù§Ô∏è, Astro, Angular, React, Express, TailwindCSS, Bootstrap, Popmotion, Lodash, Socket.io, Phaser.io, Leaflet, Moment, ...
        </li>
      </ul>
      <p>Anyway I still learn/test new tools ! Give me some nice docs, exemples and I should be able to learn the new meta üòä.</p>
    </Card>

    <Card title="Projects">
      <H2Styled>Cubcubcub</H2Styled>
      <ul>
        <li class="mb-1">
          <SpanStyled>Description:</SpanStyled>
          This website üòé
        </li>
        <li class="mb-1">
          <SpanStyled>Source:</SpanStyled>
          <a
            target="_blank"
            href="https://github.com/cub/cubcubcub">github.com/cub/cubcubcub</a
          >
        </li>
        <li class="mb-1">
          <SpanStyled>Status:</SpanStyled> ‚úîÔ∏è active
        </li>
        <li class="mb-3">
          <SpanStyled>Stack:</SpanStyled>
          Astro, TailwindCSS, Motion One, Cloudflare, Github
        </li>
      </ul>
      <H2Styled>Motoko</H2Styled>
      <ul>
        <li class="mb-1">
          <SpanStyled>Description:</SpanStyled>
          A Discord bot that plays sounds.
        </li>
        <li class="mb-1">
          <SpanStyled>Status:</SpanStyled> ‚úîÔ∏è active
        </li>
        <li class="mb-3">
          <SpanStyled>Stack:</SpanStyled>
          Node.js, Discord.js, Docker, Fly.io, Github
        </li>
      </ul>
      <H2Styled>Twinkle</H2Styled>
      <ul>
        <li class="mb-1">
          <SpanStyled>Description:</SpanStyled>
          A game heavily inspired by
          <a href="https://en.wikipedia.org/wiki/Twinkle_Star_Sprites">Twinkle Star Sprites</a>
          in HTML5, with multiplayer versus mode using P2P sockets.
        </li>
        <li class="mb-1">
          <SpanStyled>Status:</SpanStyled> ‚úîÔ∏è half-active, üìÖ 2019-2020
        </li>
        <li class="mb-3">
          <SpanStyled>Stack:</SpanStyled> Vue, Phaser, PeerJS
        </li>
      </ul>
      <H2Styled>Cake is a lie</H2Styled>
      <ul>
        <li class="mb-1">
          <SpanStyled>Description:</SpanStyled>
          An infinite rogue like in iso view and a maze generator with over 1000 tiles.
        </li>
        <li class="mb-1">
          <SpanStyled>Status:</SpanStyled> üí§ paused, üìÖ 2017-2019
        </li>
        <li class="">
          <SpanStyled>Stack:</SpanStyled> Vue, Phaser, Node.js
        </li>
      </ul>
    </Card>
    <Card title="Contact">
      <p class="mb-1">Feel free to contact me ‚ù§Ô∏è</p>
      <ul>
        <li class="flex items-center mb-1">
          <ImgSmall
            alt="Icon of an envelope"
            src="/icon/envelope.svg"
          />
          <a
            href="mailto:hello@cubcubcub.com"
            target="_blank"
            ><span>hello@cubcubcub.com</span>
          </a>
        </li>
        <li class="flex items-center mb-1">
          <ImgSmall
            alt="Logo GitHub"
            src="/icon/github.svg"
          />
          <a
            href="https://github.com/cub"
            target="_blank"
            ><span>github.com/cub</span>
          </a>
        </li>
        <li class="flex items-center">
          <ImgSmall
            alt="Logo LinkedIn"
            src="/icon/linkedin.svg"
          />
          <a
            href="https://linkedin.com/in/cubcubcub"
            target="_blank"
            ><span>linkedin.com/in/cubcubcub</span>
          </a>
        </li>
      </ul>
    </Card>
  </main>
</Layout>
